#!/usr/bin/env bash
# Knowledge System Environment Configuration
# Source this file in all tools: source "${0%/*}/../../.ks-env"
# Then source needed libraries directly: source "$KS_ROOT/lib/core.sh"

# Base directories
export KS_ROOT="${KS_ROOT:-$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)}"
export KS_KNOWLEDGE_DIR="${KS_KNOWLEDGE_DIR:-$KS_ROOT/knowledge}"
export KS_TOOLS_DIR="$KS_ROOT/tools"
export KS_EVENTS_DIR="$KS_KNOWLEDGE_DIR/events"
export KS_DERIVED_DIR="$KS_KNOWLEDGE_DIR/derived"

# File paths
export KS_HOT_LOG="$KS_EVENTS_DIR/hot.jsonl"
export KS_ARCHIVE_DIR="$KS_EVENTS_DIR/archive"
export KS_BACKGROUND_DIR="$KS_KNOWLEDGE_DIR/.background"
export KS_PROCESS_REGISTRY="$KS_BACKGROUND_DIR/processes"
export KS_ANALYSIS_QUEUE="$KS_BACKGROUND_DIR/analysis_queue.json"

# Claude model for analysis tools
export KS_MODEL="${KS_MODEL:-sonnet}"

# Bash 5.x compatibility - provide EPOCHSECONDS if not available
if [[ -z "${EPOCHSECONDS:-}" ]]; then
    export EPOCHSECONDS=$(date +%s)
fi